<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>My Music Collection</title>
  <script>
    (function() {
      const saved = localStorage.getItem('theme');
      if (saved === 'light') {
        document.documentElement.classList.remove('dark');
      } else {
        document.documentElement.classList.add('dark');
      }
    })();
  </script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Scrollbar Customization */
    ::-webkit-scrollbar { width: 8px; height: 8px; }
    ::-webkit-scrollbar-track { background: #f1f1f1; }
    ::-webkit-scrollbar-thumb { background: #888; border-radius: 4px; }
    .dark ::-webkit-scrollbar-track { background: #0f172a; }
    .dark ::-webkit-scrollbar-thumb { background: #334155; }
    
    /* Audio Player Customization */
    audio { 
      width: 100%; 
      background: #1e293b;
      padding: 8px 0;
    }
    .dark audio {
      background: #0f172a;
    }
    
    /* Mobile Optimization */
    @media (max-width: 640px) {
      .featured-grid { grid-template-columns: repeat(2, minmax(0, 1fr)) !important; }
      .song-table th, .song-table td { padding: 0.75rem 0.5rem; }
      .music-header { font-size: 1.1rem; }
      audio {
        padding: 4px 0;
      }
    }
  </style>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-slate-50 dark:bg-slate-950 text-slate-900 dark:text-slate-100 min-h-screen transition-colors duration-200">

  <header class="bg-slate-800 dark:bg-slate-900 shadow-xl sticky top-0 z-50">
    <div class="container mx-auto px-4 py-3 flex justify-between items-center">
      <div class="flex items-center space-x-3">
        <i class="fas fa-music text-2xl text-purple-400"></i>
        <h1 class="text-xl font-bold text-white">My Music</h1>
      </div>
      <div class="flex items-center space-x-3">
        <button id="theme-toggle" class="p-2 rounded-full hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-purple-400 text-white">
          <i class="fas fa-moon" aria-hidden></i>
          <i class="fas fa-sun hidden" aria-hidden></i>
        </button>
        <div class="relative">
          <button id="search-toggle" class="p-2 rounded-full hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-purple-400 text-white">
            <i class="fas fa-search"></i>
          </button>
          <div id="search-box" class="hidden absolute right-0 mt-2 w-64 bg-slate-700 shadow-lg rounded-md p-2 z-20">
            <input type="text" id="search-input" placeholder="Search songs..." class="w-full px-3 py-2 bg-slate-600 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-400 text-white placeholder-slate-300">
          </div>
        </div>
      </div>
    </div>
  </header>

  <main class="container mx-auto px-4 py-6 pb-20">

    <!-- Featured Section -->
    <section class="mb-8 bg-gradient-to-br from-purple-900/20 to-blue-900/20 rounded-xl p-6">
      <h2 class="text-2xl font-bold mb-4 text-white flex items-center">
        <i class="fas fa-star mr-2 text-purple-400"></i>
        Featured Tracks
      </h2>
      <template id="featured-template">
        <div class="bg-slate-700/50 dark:bg-slate-800/80 rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300 backdrop-blur-sm">
          <div class="relative group" data-song-id="">
            <img src="" alt="" class="w-full h-48 object-cover" data-role="featured-image">
            <div class="absolute inset-0 bg-black bg-opacity-30 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300">
              <button class="play-btn bg-purple-600 hover:bg-purple-700 text-white rounded-full p-3 focus:outline-none focus:ring-2 focus:ring-purple-500">
                <i class="fas fa-play text-lg"></i>
              </button>
            </div>
          </div>
          <div class="p-4">
            <h3 class="font-semibold text-lg mb-1 text-white" data-role="featured-title"></h3>
            <p class="text-slate-300 dark:text-slate-400 text-sm mb-3" data-role="featured-duration"></p>
            <div class="flex justify-between items-center">
              <button class="download-btn text-purple-400 hover:text-purple-300 text-sm focus:outline-none focus:ring-2 focus:ring-purple-500" data-song-id="">
                <i class="fas fa-download mr-1"></i> Download
              </button>
              <button class="share-btn text-slate-400 hover:text-slate-300 text-sm focus:outline-none focus:ring-2 focus:ring-slate-500" data-song-id="">
                <i class="fas fa-share-alt"></i>
              </button>
            </div>
          </div>
        </div>
      </template>
      <div id="featured-container" class="grid grid-cols-2 md:grid-cols-4 gap-4 featured-grid"></div>
    </section>

    <!-- All Songs Section -->
    <section class="mb-8 bg-slate-800/90 dark:bg-slate-900/80 rounded-xl shadow-xl">
      <div class="p-4">
        <h2 class="text-2xl font-bold mb-4 text-white">All Songs</h2>
        <div class="overflow-x-auto rounded-lg border border-slate-700">
          <table class="min-w-full divide-y divide-slate-700 song-table">
            <thead class="bg-slate-800">
              <tr>
                <th class="px-4 py-3 text-left text-sm font-semibold text-purple-300">#</th>
                <th class="px-4 py-3 text-left text-sm font-semibold text-purple-300">Title</th>
                <th class="px-4 py-3 text-left text-sm font-semibold text-purple-300">Artist</th>
                <th class="px-4 py-3 text-left text-sm font-semibold text-purple-300">Duration</th>
                <th class="px-4 py-3 text-right text-sm font-semibold text-purple-300">Actions</th>
              </tr>
            </thead>
            <tbody id="songs-table-body" class="bg-slate-800/50 divide-y divide-slate-700"></tbody>
          </table>
        </div>
      </div>
    </section>

  </main>

  <footer class="container mx-auto px-4 py-6 text-center text-slate-400 dark:text-slate-500 text-sm">
    &copy; 2025 My Music Collection. All rights reserved.
  </footer>

  <!-- Audio Player -->
  <audio id="audioPlayer" class="fixed bottom-0 left-0 right-0 w-full bg-slate-800 dark:bg-slate-900 shadow-2xl border-t border-slate-700 px-4 py-2"></audio>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Theme toggle with persistence
      const toggle = document.getElementById('theme-toggle');
      const moon = toggle.querySelector('.fa-moon');
      const sun = toggle.querySelector('.fa-sun');
      const updateIcons = () => {
        if (document.documentElement.classList.contains('dark')) {
          moon.classList.add('hidden'); sun.classList.remove('hidden');
        } else {
          moon.classList.remove('hidden'); sun.classList.add('hidden');
        }
      };
      updateIcons();
      toggle.addEventListener('click', () => {
        document.documentElement.classList.toggle('dark');
        localStorage.setItem('theme', document.documentElement.classList.contains('dark') ? 'dark' : 'light');
        updateIcons();
      });

      // Search toggle
      document.getElementById('search-toggle').addEventListener('click', () => {
        const box = document.getElementById('search-box');
        box.classList.toggle('hidden');
        if (!box.classList.contains('hidden')) document.getElementById('search-input').focus();
      });

      // Render songs and handlers
      renderSongsTable();
      document.body.addEventListener('click', handlePlayDownload);
    });

    function renderSongsTable() {
      // Mock data - replace with your actual fetch('./songs.json')
      const mockData = [
        {
          id: '1',
          title: 'Sample Song 1',
          artist: 'Artist A',
          duration: '3:45',
          image: 'https://via.placeholder.com/300',
          src: 'https://example.com/sample1.mp3'
        },
        {
          id: '2',
          title: 'Sample Song 2',
          artist: 'Artist B',
          duration: '4:20',
          image: 'https://via.placeholder.com/300',
          src: 'https://example.com/sample2.mp3'
        },
        {
          id: '3',
          title: 'Sample Song 3',
          artist: 'Artist C',
          duration: '2:55',
          image: 'https://via.placeholder.com/300',
          src: 'https://example.com/sample3.mp3'
        },
        {
          id: '4',
          title: 'Sample Song 4',
          artist: 'Artist D',
          duration: '3:30',
          image: 'https://via.placeholder.com/300',
          src: 'https://example.com/sample4.mp3'
        }
      ];

      // Use mock data instead of fetch for this example
      const data = mockData;

      const featuredContainer = document.getElementById('featured-container');
      const template = document.getElementById('featured-template');
      featuredContainer.innerHTML = '';
      
      data.slice(0,4).forEach(song => {
        const clone = template.content.cloneNode(true);
        const container = clone.querySelector('.relative');
        container.dataset.songId = song.id;
        clone.querySelector('[data-role="featured-image"]').src = song.image;
        clone.querySelector('[data-role="featured-image"]').alt = song.title;
        clone.querySelector('[data-role="featured-title"]').textContent = song.title;
        clone.querySelector('[data-role="featured-duration"]').textContent = song.duration;
        clone.querySelector('.download-btn').dataset.songId = song.id;
        clone.querySelector('.share-btn').dataset.songId = song.id;
        featuredContainer.appendChild(clone);
      });

      const tbody = document.getElementById('songs-table-body');
      tbody.innerHTML = '';
      data.forEach((song, i) => {
        const tr = document.createElement('tr');
        tr.className = 'hover:bg-slate-700/50';
        tr.dataset.songId = song.id;
        tr.innerHTML = `
          <td class="px-4 py-4 whitespace-nowrap text-slate-200">${i+1}</td>
          <td class="px-4 py-4 whitespace-nowrap text-slate-200 flex items-center space-x-3">
            <img src="${song.image}" alt="${song.title}" class="w-10 h-10 object-cover rounded-md">
            <span>${song.title}</span>
          </td>
          <td class="px-4 py-4 whitespace-nowrap text-slate-300">${song.artist}</td>
          <td class="px-4 py-4 whitespace-nowrap text-slate-300">${song.duration}</td>
          <td class="px-4 py-4 whitespace-nowrap text-right space-x-3">
            <button class="download-btn text-purple-400 hover:text-purple-300 focus:outline-none" data-song-id="${song.id}"><i class="fas fa-download"></i></button>
          </td>`;
        tbody.appendChild(tr);
      });
    }

    function handlePlayDownload(e) {
      const dlBtn = e.target.closest('.download-btn');
      const shareBtn = e.target.closest('.share-btn');
      
      // Handle download
      if (dlBtn) {
        const songId = dlBtn.dataset.songId;
        // In a real app, you would fetch the song data
        alert(`Download would trigger for song ID: ${songId}`);
        return;
      }

      // Handle play on any song element
      const songElement = e.target.closest('[data-song-id]');
      if (songElement && !shareBtn && !e.target.closest('.download-btn')) {
        const songId = songElement.dataset.songId;
        const player = document.getElementById('audioPlayer');
        // In a real app, you would set the correct src from your data
        player.src = `https://example.com/sample${songId}.mp3`;
        player.play();
        alert(`Now playing song ID: ${songId}`);
      }
    }
  </script>
</body>
</html>
